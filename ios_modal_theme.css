/* ==========================================================
   æ¨¡æ€æ¡†ä¸»é¢˜ - æœˆç™½ä¸é’é»› / Moon White & Indigo Grey
   é«˜çº§å…‹åˆ¶é£æ ¼ (Advanced & Restrained) - å»iOSåŒ–ï¼Œå»æš–è‰²è°ƒ
   ä¸ chat-settings-page.css ç»Ÿä¸€è®¾è®¡è¯­è¨€
   ========================================================== */

/* ===== 1. èƒŒæ™¯é®ç½©å±‚ ===== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(69, 73, 77, 0.25); /* é’é»›è‰²è°ƒçš„é®ç½© */
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: var(--z-overlay, 1000) !important; /* ä½¿ç”¨å±‚çº§è§„èŒƒå˜é‡ */
}

/* ===== 2. å¼¹çª—ä¸»ä½“ ===== */
.modal-content {
    /* çº¯å‡€çš„æœˆç™½èƒŒæ™¯ï¼Œä¸ä½¿ç”¨åŠé€æ˜ */
    background: #FFFFFF !important;
    
    /* å»é™¤ç£¨ç ‚æ•ˆæœï¼Œä½¿ç”¨å®è‰² */
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    
    /* å…‹åˆ¶çš„åœ†è§’ */
    border-radius: 20px !important;
    border: 1px solid rgba(69, 73, 77, 0.12) !important;
    
    /* æå…‹åˆ¶çš„é˜´å½± */
    box-shadow: 0 8px 32px rgba(69, 73, 77, 0.12) !important;

    /* é’é»›æ–‡æœ¬è‰² */
    color: #45494D;
    
    /* å¸ƒå±€ä¼˜åŒ– */
    padding: 0 !important;
    overflow: hidden;
    
    /* å¹²è„†çš„åŠ¨ç”» */
    animation-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: scale(0.96) translateY(8px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* ===== 3. å¤´éƒ¨æ ·å¼ ===== */
.modal-header {
    background: transparent !important;
    border-bottom: 1px solid rgba(69, 73, 77, 0.08) !important;
    padding: 18px 20px !important;
}

.modal-header h2 {
    font-weight: 600;
    font-size: 16px;
    letter-spacing: 0.3px;
    color: #45494D;
}

/* ===== 4. å…³é—­æŒ‰é’® ===== */
.modal-close-button {
    background: rgba(69, 73, 77, 0.06);
    border-radius: 10px;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #5F6B73;
    font-size: 16px;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
}

.modal-close-button:hover,
.modal-close-button:active {
    background: rgba(69, 73, 77, 0.1);
    color: #45494D;
}


.save-button, 
.confirm-button {
    background: #45494D !important;
    color: #fff !important;
    border-radius: 12px !important;
    font-weight: 500;
    font-size: 14px;
    padding: 12px 24px;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: none !important;
}

.save-button:hover,
.confirm-button:hover {
    background: #5F6B73 !important;
}

.save-button:active,
.confirm-button:active {
    transform: scale(0.98);
    background: #3A3D40 !important;
}

.cancel-button {
    background: #F4F7F9 !important;
    color: #45494D !important;
    border-radius: 12px !important;
    font-weight: 500;
    font-size: 14px;
    padding: 12px 24px;
    border: 1px solid rgba(69, 73, 77, 0.12) !important;
    cursor: pointer;
    transition: all 0.2s ease;
}

.cancel-button:hover {
    background: #EAEFF2 !important;
}

.cancel-button:active {
    transform: scale(0.98);
}

/* ===== 6. è¾“å…¥æ¡†æ ·å¼ ===== */
.form-input, 
.form-textarea, 
.role-form input, 
.role-form textarea {
    background: #F4F7F9 !important;
    border: 1px solid rgba(69, 73, 77, 0.12) !important;
    border-radius: 12px !important;
    padding: 14px 16px;
    font-size: 15px;
    color: #45494D !important;
    transition: all 0.2s ease;
    font-family: inherit;
    box-sizing: border-box;
    width: 100%;
}

.form-input::placeholder,
.form-textarea::placeholder {
    color: #9FA6AB;
}

.form-input:focus, 
.form-textarea:focus,
.role-form input:focus,
.role-form textarea:focus {
    background: #FFFFFF !important;
    border-color: #45494D !important;
    box-shadow: 0 0 0 3px rgba(69, 73, 77, 0.08) !important;
    outline: none !important;
}

/* ===== 7. è¡¨å•æ ‡ç­¾ ===== */
.form-label,
label {
    display: block;
    font-size: 11px;
    font-weight: 600;
    color: #9FA6AB;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.8px;
}

/* ===== 8. å¼€å…³æ§ä»¶ ===== */
.switch-label {
    font-size: 14px;
    color: #5F6B73;
    transition: color 0.2s ease;
}

.switch-label.active {
    color: #45494D;
    font-weight: 500;
}

/* è‡ªå®šä¹‰å¼€å…³æ ·å¼ */
.ios-switch,
.toggle-switch {
    position: relative;
    width: 50px;
    height: 30px;
    background: #F4F7F9;
    border-radius: 30px;
    cursor: pointer;
    transition: background 0.3s ease;
    flex-shrink: 0;
    border: 1px solid rgba(69, 73, 77, 0.12);
}

.ios-switch.active,
.toggle-switch.active {
    background: #45494D;
    border-color: transparent;
}

.ios-switch::after,
.toggle-switch::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 24px;
    height: 24px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.ios-switch.active::after,
.toggle-switch.active::after {
    transform: translateX(20px);
}

/* ===== 9. é€‰æ‹©å™¨/ä¸‹æ‹‰æ¡† ===== */
select {
    appearance: none;
    -webkit-appearance: none;
   
    border: 1px solid rgba(69, 73, 77, 0.12) !important;
    border-radius: 4px !important;
    padding: 8px 40px 8px 16px;
    font-size: 15px;
    color: #45494D !important;
    cursor: pointer;
    width: 100%;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%235F6B73' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 14px center;
    transition: all 0.2s ease;
}

select:focus {
    border-color: #45494D !important;
    outline: none;
    box-shadow: 0 0 0 3px rgba(69, 73, 77, 0.08);
}

/* ===== 10. æ»šåŠ¨æ¡æ ·å¼ ===== */
.modal-content ::-webkit-scrollbar {
    width: 4px;
}

.modal-content ::-webkit-scrollbar-track {
    background: transparent;
}

.modal-content ::-webkit-scrollbar-thumb {
    background: rgba(69, 73, 77, 0.15);
    border-radius: 2px;
}

.modal-content ::-webkit-scrollbar-thumb:hover {
    background: rgba(69, 73, 77, 0.25);
}

/* ===== 11. æ·±è‰²æ¨¡å¼é€‚é… ===== */
@media (prefers-color-scheme: dark) {
    .modal-overlay {
        background-color: rgba(0, 0, 0, 0.5);
    }
    
    .modal-content {
        background: #1C1C1E !important;
        border: 1px solid rgba(255, 255, 255, 0.08) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;
        color: #F5F5F7;
    }
    
    .modal-header h2 {
        color: #F5F5F7;
    }
    
    .modal-header, 
    .modal-footer {
        border-color: rgba(255, 255, 255, 0.08) !important;
    }
    
    .modal-close-button {
        background: rgba(255, 255, 255, 0.08);
        color: #A1A1A6;
    }
    
    .modal-close-button:hover,
    .modal-close-button:active {
        background: rgba(255, 255, 255, 0.12);
        color: #F5F5F7;
    }
    
    .form-input, 
    .form-textarea,
    .role-form input,
    .role-form textarea {
        background: rgba(255, 255, 255, 0.06) !important;
        border-color: rgba(255, 255, 255, 0.08) !important;
        color: #F5F5F7 !important;
    }
    
    .form-input::placeholder,
    .form-textarea::placeholder {
        color: #636366;
    }
    
    .form-input:focus, 
    .form-textarea:focus,
    .role-form input:focus,
    .role-form textarea:focus {
        background: rgba(255, 255, 255, 0.1) !important;
        border-color: #636366 !important;
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.06) !important;
    }
    
    select {
        background: rgba(255, 255, 255, 0.06) !important;
        border-color: rgba(255, 255, 255, 0.08) !important;
        color: #F5F5F7 !important;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23A1A1A6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    }
    
    .switch-label {
        color: #A1A1A6;
    }
    
    .switch-label.active {
        color: #F5F5F7;
    }
    
    .ios-switch,
    .toggle-switch {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.1);
    }
    
    .ios-switch.active,
    .toggle-switch.active {
        background: #636366;
    }
    
    .cancel-button {
        background: rgba(255, 255, 255, 0.08) !important;
        color: #F5F5F7 !important;
        border-color: rgba(255, 255, 255, 0.1) !important;
    }
    
    .cancel-button:hover {
        background: rgba(255, 255, 255, 0.12) !important;
    }
    
    .save-button, 
    .confirm-button {
        background: #636366 !important;
    }
    
    .save-button:hover,
    .confirm-button:hover {
        background: #7C7C80 !important;
    }
    
    .save-button:active,
    .confirm-button:active {
        background: #545456 !important;
    }
    
    .form-label,
    label {
        color: #636366;
    }
    
    .modal-content ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.15);
    }
    
    .modal-content ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.25);
    }
}

/* ===== 12. Glass Segment Control - æœˆç™½ä¸é’é»›é£æ ¼ ===== */
.glass-segment-control {
    pointer-events: auto;
    position: relative;
    display: flex;
    /* æœˆç™½è‰²èƒŒæ™¯ï¼Œå»é™¤ç£¨ç ‚ */
    background-color: #F4F7F9;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    padding: 3px;
    border-radius: 10px;
    /* æ›´å…‹åˆ¶çš„åœ†è§’ */
    box-shadow: none;
    border: 1px solid rgba(69, 73, 77, 0.1);
    width: 160px;
    height: 34px;
}

/* å•ä¸ªæŒ‰é’® */
.glass-segment-control .segment-btn {
    flex: 1;
    position: relative;
    z-index: 2;
    border: none;
    background: none;
    font-size: 13px;
    font-weight: 500;
    color: #9FA6AB;
    /* æ·¡ç°ï¼šæœªé€‰ä¸­ */
    cursor: pointer;
    transition: color 0.25s ease;
    border-radius: 8px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* é€‰ä¸­çŠ¶æ€çš„æ–‡å­—é¢œè‰² */
.glass-segment-control .segment-btn.active {
    color: #45494D;
    /* é’é»›ï¼šé€‰ä¸­ */
    font-weight: 600;
}

/* æ»‘åŠ¨æŒ‡ç¤ºå™¨ */
.glass-segment-control .segment-indicator {
    position: absolute;
    top: 3px;
    left: 3px;
    width: calc(50% - 3px);
    height: calc(100% - 6px);
    background-color: #FFFFFF;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(69, 73, 77, 0.1);
    z-index: 1;
    transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
}

/* å³ä¾§æ¿€æ´»çŠ¶æ€ */
.glass-segment-control.group-mode .segment-indicator,
.glass-segment-control.user-mode .segment-indicator {
    transform: translateX(100%);
}

/* ===== 13. è§’è‰²è®¾ç½®æ¨¡æ€æ¡†å¸ƒå±€ä¿®å¤ ===== */
/* ä½¿ä¿å­˜æŒ‰é’®å›ºå®šåœ¨åº•éƒ¨ */
#role-settings-modal .modal-content,
.role-settings-modal .modal-content {
    display: flex;
    flex-direction: column;
    max-height: 85vh;
}

#role-settings-modal .modal-body,
.role-settings-modal .modal-body,
.role-form {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
}

/* åº•éƒ¨å›ºå®šåŒºåŸŸ */
#role-settings-modal .modal-footer,
.role-settings-modal .modal-footer {
    flex-shrink: 0;
    padding: 16px 20px !important;
    background: #FFFFFF !important;
    border-top: 1px solid rgba(69, 73, 77, 0.08) !important;
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

/* ä¸Šä¸‹æ–‡è®°å¿†è¡Œå¸ƒå±€ */
.context-memory-row,
.role-form-row.inline {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 0;
    border-top: 1px solid rgba(69, 73, 77, 0.06);
    margin-top: 16px;
}

.context-memory-row label,
.role-form-row.inline label {
    font-size: 14px;
    font-weight: 500;
    color: #45494D;
    text-transform: none;
    letter-spacing: 0;
    margin-bottom: 0;
}

/* æ•°å­—è¾“å…¥æ¡†å°å°ºå¯¸ */
.context-memory-row input[type="number"],
.role-form-row.inline input[type="number"] {
    width: 70px;
    padding: 10px 12px;
    text-align: center;
    font-size: 14px;
}

/* ===== 14. æ·±è‰²æ¨¡å¼ä¸‹çš„ Segment Control ===== */
@media (prefers-color-scheme: dark) {
    .glass-segment-control {
        background-color: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.1);
    }
    
    .glass-segment-control .segment-btn {
        color: #636366;
    }
    
    .glass-segment-control .segment-btn.active {
        color: #F5F5F7;
    }
    
    .glass-segment-control .segment-indicator {
        background-color: rgba(255, 255, 255, 0.15);
        box-shadow: none;
    }
    
    #role-settings-modal .modal-footer,
    .role-settings-modal .modal-footer {
        background: #1C1C1E !important;
    }
}

/* ===== 15. Role Switcherï¼ˆChar/User åˆ‡æ¢å™¨ï¼‰ç¾åŒ– ===== */
.role-switcher {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 4px;
    background: #F4F7F9;
    border-radius: 10px;
    border: 1px solid rgba(69, 73, 77, 0.1);
}

.role-switcher .switch-label {
    font-size: 13px;
    font-weight: 500;
    color: #9FA6AB;
    padding: 6px 12px;
    transition: all 0.25s ease;
    cursor: pointer;
    border-radius: 6px;
}

.role-switcher .switch-label.active {
    color: #45494D;
    font-weight: 600;
    background: #FFFFFF;
    box-shadow: 0 1px 3px rgba(69, 73, 77, 0.1);
}

/* éšè—åŸå§‹å¼€å…³ï¼Œæ”¹ç”¨çº¯ CSS æ ·å¼ */
.role-switcher .switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 22px;
}

.role-switcher .switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.role-switcher .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(69, 73, 77, 0.15);
    transition: 0.3s;
    border-radius: 22px;
}

.role-switcher .slider:before {
    position: absolute;
    content: "";
    height: 16px;
    width: 16px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
}

.role-switcher input:checked + .slider {
    background-color: #45494D;
}

.role-switcher input:checked + .slider:before {
    transform: translateX(18px);
}

/* ===== 16. æ·»åŠ è”ç³»äººæ¨¡æ€æ¡†åº•éƒ¨å¸ƒå±€ä¿®å¤ ===== */
#add-contact-modal .modal-footer {
    display: flex !important;
    flex-direction: column !important;
    gap: 15px;
    padding: 20px !important;
}

#add-contact-modal .save-button {
    width: 100%;
    margin-top: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
}

#add-contact-modal .form-group-inline {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
}

#add-contact-modal .form-group-inline label {
    font-size: 14px;
    font-weight: 500;
    color: #5F6B73;
    text-transform: none;
    letter-spacing: 0;
    margin: 0;
    white-space: nowrap;
}

#add-contact-modal .form-group-inline input[type="number"] {
    width: 60px;
    padding: 8px 10px;
    text-align: center;
    font-size: 14px;
    background: #F4F7F9 !important;
    border: 1px solid rgba(69, 73, 77, 0.12) !important;
    border-radius: 8px !important;
}

#add-contact-modal .save-button {
    padding: 10px 24px;
    font-size: 14px;
    min-width: auto;
}

/* ===== 17. Avatar Uploader ç¾åŒ– ===== */
.avatar-uploader {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
}

.avatar-preview {
    width: 80px;
    height: 80px;
    border-radius: 20px;
    object-fit: cover;
    background: #F4F7F9;
    border: 2px solid rgba(69, 73, 77, 0.08);
    box-shadow: 0 4px 12px rgba(69, 73, 77, 0.08);
}

.avatar-upload-label {
    font-size: 13px;
    font-weight: 500;
    color: #45494D;
    cursor: pointer;
    transition: color 0.2s ease;
}

.avatar-upload-label:hover {
    color: #5F6B73;
}

/* ===== 18. æ·±è‰²æ¨¡å¼ä¸‹çš„è¡¥å……æ ·å¼ ===== */
@media (prefers-color-scheme: dark) {
    .role-switcher {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.1);
    }
    
    .role-switcher .switch-label {
        color: #636366;
    }
    
    .role-switcher .switch-label.active {
        color: #F5F5F7;
        background: rgba(255, 255, 255, 0.15);
    }
    
    .role-switcher .slider {
        background-color: rgba(255, 255, 255, 0.15);
    }
    
    .role-switcher input:checked + .slider {
        background-color: #636366;
    }
    
    #add-contact-modal .modal-footer {
        background: #1C1C1E !important;
    }
    
    #add-contact-modal .form-group-inline label {
        color: #A1A1A6;
    }
    
    .avatar-preview {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.1);
    }
    
    .avatar-upload-label {
        color: #A1A1A6;
    }
    
    .avatar-upload-label:hover {
        color: #F5F5F7;
    }
}

/* ===== 19. æ°”æ³¡é¢„è®¾å¡ç‰‡ç¾åŒ– - æœˆç™½ä¸é’é»›é£æ ¼ ===== */
.bubble-preset-item {
    display: flex;
    flex-direction: column;
    background-color: #FFFFFF;
    border-radius: 16px;
    padding: 18px;
    margin: 0 16px 14px 16px;
    width: auto;
    box-sizing: border-box;
    
    /* å…‹åˆ¶çš„è¾¹æ¡†å’Œé˜´å½± */
    border: 1px solid rgba(69, 73, 77, 0.1);
    box-shadow: 0 2px 8px rgba(69, 73, 77, 0.06);
    position: relative;
    transition: box-shadow 0.2s ease, transform 0.2s ease;
}

.bubble-preset-item:active {
    transform: scale(0.99);
    box-shadow: 0 1px 4px rgba(69, 73, 77, 0.08);
}

.bubble-preset-item .preset-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
}

.bubble-preset-item .preset-name {
    font-size: 16px;
    font-weight: 600;
    color: #45494D;
    letter-spacing: -0.2px;
}

.bubble-preset-item .preset-time {
    font-size: 12px;
    color: #9FA6AB;
    font-weight: 500;
}

/* é¢„è§ˆåŒºï¼šæœˆç™½è‰²èƒŒæ™¯ */
.bubble-preset-item .preset-preview {
    font-size: 12px;
    color: #5F6B73;
    background-color: #F4F7F9;
    padding: 14px;
    border-radius: 10px;
    font-family: 'SF Mono', ui-monospace, monospace;
    border: 1px solid rgba(69, 73, 77, 0.06);
    max-height: 72px;
    overflow: hidden;
    margin-bottom: 16px;
    white-space: pre-wrap;
    word-break: break-all;
    line-height: 1.5;
}

.bubble-preset-item .preset-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

/* æŒ‰é’®ï¼šå…‹åˆ¶çš„é£æ ¼ */
.bubble-preset-item .preset-actions button {
    padding: 8px 18px;
    border-radius: 10px;
    border: 1px solid rgba(69, 73, 77, 0.15);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    background-color: #FFFFFF;
    transition: all 0.2s ease;
    color: #45494D;
}

/* åˆ†äº«æŒ‰é’®ï¼šä½¿ç”¨é’é»›è‰² */
.bubble-preset-item .share-btn {
    background-color: #45494D !important;
    color: #FFFFFF !important;
    border-color: transparent !important;
}

.bubble-preset-item .share-btn:active {
    background-color: #5F6B73 !important;
    transform: scale(0.98);
}

/* åˆ é™¤æŒ‰é’®ï¼šä½é¥±å’Œåº¦çº¢è‰² */
.bubble-preset-item .delete-btn {
    color: #C48888 !important;
    border-color: #D4A5A5 !important;
    background-color: #FFFFFF !important;
}

.bubble-preset-item .delete-btn:active {
    background-color: rgba(212, 165, 165, 0.1) !important;
    transform: scale(0.98);
}

/* ===== 20. Theme é¢„è®¾å¡ç‰‡å®Œæ•´ç¾åŒ– - æœˆç™½ä¸é’é»›é£æ ¼ ===== */
.theme-preset-item {
    display: flex;
    flex-direction: column;
    background-color: #FFFFFF;
    border-radius: 16px;
    padding: 18px;
    margin: 0 16px 14px 16px;
    width: auto;
    box-sizing: border-box;
    
    /* å…‹åˆ¶çš„è¾¹æ¡†å’Œé˜´å½± */
    border: 1px solid rgba(69, 73, 77, 0.1);
    box-shadow: 0 2px 8px rgba(69, 73, 77, 0.06);
    position: relative;
    transition: box-shadow 0.2s ease, transform 0.2s ease;
}

.theme-preset-item:active {
    transform: scale(0.99);
    box-shadow: 0 1px 4px rgba(69, 73, 77, 0.08);
}

.theme-preset-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
}

.theme-preset-name {
    font-size: 16px;
    font-weight: 600;
    color: #45494D;
    letter-spacing: -0.2px;
    text-transform: none; /* å»é™¤å…¨å¤§å†™ */
}

.theme-preset-time {
    font-size: 12px;
    color: #9FA6AB;
    font-weight: 500;
}

/* é¢„è§ˆåŒºï¼šæœˆç™½è‰²èƒŒæ™¯ */
.theme-preset-preview {
    font-size: 12px;
    color: #5F6B73;
    background-color: #F4F7F9;
    padding: 14px;
    border-radius: 10px;
    font-family: 'SF Mono', ui-monospace, monospace;
    border: 1px solid rgba(69, 73, 77, 0.06);
    max-height: 72px;
    overflow: hidden;
    margin-bottom: 16px;
    white-space: pre-wrap;
    word-break: break-all;
    line-height: 1.5;
}

.theme-preset-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

/* æŒ‰é’®ï¼šå…‹åˆ¶çš„é£æ ¼ */
.theme-preset-actions button {
    padding: 8px 18px;
    border-radius: 10px;
    border: 1px solid rgba(69, 73, 77, 0.15);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    background-color: #FFFFFF;
    transition: all 0.2s ease;
    color: #45494D;
}

/* åº”ç”¨æŒ‰é’®ï¼šä½¿ç”¨é’é»›è‰² */
.theme-preset-actions .apply-btn {
    background-color: #45494D !important;
    color: #FFFFFF !important;
    border-color: transparent !important;
}

.theme-preset-actions .apply-btn:active {
    background-color: #5F6B73 !important;
    transform: scale(0.98);
}

/* å¯¼å‡ºæŒ‰é’®ï¼šçº¿æ¡†é£æ ¼ */
.theme-preset-actions .export-btn {
    background-color: #FFFFFF !important;
    color: #45494D !important;
    border-color: rgba(69, 73, 77, 0.2) !important;
}

.theme-preset-actions .export-btn:active {
    background-color: #F4F7F9 !important;
    transform: scale(0.98);
}

/* åˆ é™¤æŒ‰é’®ï¼šä½é¥±å’Œåº¦çº¢è‰² */
.theme-preset-actions .delete-btn {
    color: #C48888 !important;
    border-color: #D4A5A5 !important;
    background-color: #FFFFFF !important;
}

.theme-preset-actions .delete-btn:active {
    background-color: rgba(212, 165, 165, 0.1) !important;
    transform: scale(0.98);
}

/* ===== 21. ä¿å­˜æŒ‰é’®å¸ƒå±€å¼ºåŒ–ä¿®å¤ ===== */
/* é’ˆå¯¹æ·»åŠ è”ç³»äººæ¨¡æ€æ¡†çš„åº•éƒ¨å¸ƒå±€ */
#add-contact-modal .modal-content {
    display: flex;
    flex-direction: column;
    max-height: 80vh;
    overflow: hidden;
}

#add-contact-modal .role-form {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    padding-bottom: 10px;
}

#add-contact-modal .modal-footer {
    flex-shrink: 0;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 16px 20px !important;
    background: #FFFFFF !important;
    border-top: 1px solid rgba(69, 73, 77, 0.08) !important;
    gap: 16px;
}

#add-contact-modal .form-group-inline {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    flex-shrink: 0;
}

#add-contact-modal .form-group-inline label {
    font-size: 14px !important;
    font-weight: 500 !important;
    color: #5F6B73 !important;
    text-transform: none !important;
    letter-spacing: 0 !important;
    margin: 0 !important;
    white-space: nowrap !important;
}

#add-contact-modal .form-group-inline input[type="number"] {
    width: 60px !important;
    padding: 8px 10px !important;
    text-align: center !important;
    font-size: 14px !important;
    background: #F4F7F9 !important;
    border: 1px solid rgba(69, 73, 77, 0.12) !important;
    border-radius: 8px !important;
    margin: 0 !important;
}

#add-contact-modal .save-button {
    padding: 10px 24px !important;
    font-size: 14px !important;
    min-width: 80px !important;
    flex-shrink: 0;
}

/* ===== 22. æ·±è‰²æ¨¡å¼ä¸‹çš„æ°”æ³¡é¢„è®¾å¡ç‰‡ ===== */
@media (prefers-color-scheme: dark) {
    .bubble-preset-item {
        background-color: #1C1C1E;
        border-color: rgba(255, 255, 255, 0.1);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    .bubble-preset-item .preset-name {
        color: #F5F5F7;
    }
    
    .bubble-preset-item .preset-time {
        color: #636366;
    }
    
    .bubble-preset-item .preset-preview {
        background-color: rgba(255, 255, 255, 0.06);
        border-color: rgba(255, 255, 255, 0.08);
        color: #A1A1A6;
    }
    
    .bubble-preset-item .preset-actions button {
        background-color: #2C2C2E;
        border-color: rgba(255, 255, 255, 0.1);
        color: #F5F5F7;
    }
    
    .bubble-preset-item .share-btn {
        background-color: #636366 !important;
    }
    
    .bubble-preset-item .delete-btn {
        color: #C48888 !important;
        border-color: rgba(196, 136, 136, 0.3) !important;
        background-color: #2C2C2E !important;
    }
    
    .theme-preset-item {
        background-color: #1C1C1E;
        border-color: rgba(255, 255, 255, 0.1);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    .theme-preset-name {
        color: #F5F5F7;
    }
    
    .theme-preset-time {
        color: #636366;
    }
    
    .theme-preset-preview {
        background-color: rgba(255, 255, 255, 0.06);
        border-color: rgba(255, 255, 255, 0.08);
        color: #A1A1A6;
    }
    
    .theme-preset-actions button {
        background-color: #2C2C2E;
        border-color: rgba(255, 255, 255, 0.1);
        color: #F5F5F7;
    }
    
    .theme-preset-actions .apply-btn {
        background-color: #636366 !important;
    }
    
    .theme-preset-actions .export-btn {
        background-color: #2C2C2E !important;
        border-color: rgba(255, 255, 255, 0.15) !important;
    }
    
    .theme-preset-actions .delete-btn {
        color: #C48888 !important;
        border-color: rgba(196, 136, 136, 0.3) !important;
        background-color: #2C2C2E !important;
    }
    
    #add-contact-modal .modal-footer {
        background: #1C1C1E !important;
    }
}

/* ===== 23. å›¾æ ‡åŒ…é¢„è®¾åˆ—è¡¨ç¾åŒ– ===== */
#preset-list-container {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* é¢„è®¾é¡¹æ ·å¼ */
.preset-item,
.icon-preset-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 16px;
    background: #FFFFFF;
    border-radius: 16px;
    border: 1px solid rgba(69, 73, 77, 0.1);
    box-shadow: 0 2px 8px rgba(69, 73, 77, 0.06);
    transition: all 0.2s ease;
    cursor: pointer;
}

.preset-item:active,
.icon-preset-item:active {
    transform: scale(0.99);
    box-shadow: 0 1px 4px rgba(69, 73, 77, 0.08);
}

.preset-item .preset-icon,
.icon-preset-item .preset-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    background: #F4F7F9;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.preset-item .preset-info,
.icon-preset-item .preset-info {
    flex: 1;
    min-width: 0;
}

.preset-item .preset-name,
.icon-preset-item .preset-name {
    font-size: 15px;
    font-weight: 600;
    color: #45494D;
    margin-bottom: 4px;
}

.preset-item .preset-desc,
.icon-preset-item .preset-desc {
    font-size: 12px;
    color: #9FA6AB;
}

/* ===== 24. ä¸–ç•Œä¹¦åˆ†ç»„åˆ—è¡¨ - ç€‘å¸ƒæµå¡ç‰‡è®¾è®¡ ===== */
#worldbook-groups-list {
    /* è¦†ç›–é»˜è®¤çš„ contact-list æ ·å¼ */
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 12px !important;
    padding: 16px !important;
    list-style: none !important;
}

/* ä¸–ç•Œä¹¦åˆ†ç»„å¡ç‰‡ */
#worldbook-groups-list .contact-item,
.worldbook-group-card {
    /* é‡ç½® contact-item æ ·å¼ */
    all: unset;
    display: flex !important;
    flex-direction: column !important;
    padding: 16px !important;
    background: #FFFFFF !important;
    border-radius: 0 0 16px 16px !important;
    border: 1px solid rgba(69, 73, 77, 0.1) !important;
    box-shadow: 0 2px 8px rgba(69, 73, 77, 0.06) !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    box-sizing: border-box !important;
    min-height: 80px !important;
    position: relative !important;
}

#worldbook-groups-list .contact-item:active,
.worldbook-group-card:active {
    transform: scale(0.98) !important;
    box-shadow: 0 1px 4px rgba(69, 73, 77, 0.08) !important;
}

/* åˆ†ç»„åç§° */
#worldbook-groups-list .contact-item .contact-name,
#worldbook-groups-list .contact-item .group-name,
.worldbook-group-card .group-name {
    font-size: 16px !important;
    font-weight: 600 !important;
    color: #45494D !important;
    margin-bottom: 8px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

/* åˆ†ç»„è®¡æ•° */
#worldbook-groups-list .contact-item .contact-preview,
#worldbook-groups-list .contact-item .group-count,
.worldbook-group-card .group-count {
    font-size: 12px !important;
    color: #9FA6AB !important;
    display: flex !important;
    align-items: center !important;
    gap: 4px !important;
}

/* éšè—åŸæœ‰çš„å¤´åƒç­‰å…ƒç´  */
#worldbook-groups-list .contact-item .contact-avatar,
#worldbook-groups-list .contact-item .contact-avatar-wrapper,
#worldbook-groups-list .contact-item .contact-status,
#worldbook-groups-list .contact-item .contact-time {
    display: none !important;
}

/* åˆ†ç»„å¡ç‰‡è£…é¥°æ¡ */
#worldbook-groups-list .contact-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #45494D 0%, #9FA6AB 100%);
    border-radius: 16px 16px 0 0;
    opacity: 0.6;
}

/* å¯é€‰ï¼šæ·»åŠ å°ä¹¦æœ¬å›¾æ ‡ */
#worldbook-groups-list .contact-item::after {
    content: 'ğŸ“š';
    position: absolute;
    top: 12px;
    right: 12px;
    font-size: 14px;
    opacity: 0.3;
}

/* ===== 25. æ·±è‰²æ¨¡å¼ä¸‹çš„å›¾æ ‡åŒ…é¢„è®¾å’Œä¸–ç•Œä¹¦ ===== */
@media (prefers-color-scheme: dark) {
    .preset-item,
    .icon-preset-item {
        background: #1C1C1E;
        border-color: rgba(255, 255, 255, 0.1);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    .preset-item .preset-icon,
    .icon-preset-item .preset-icon {
        background: rgba(255, 255, 255, 0.08);
    }
    
    .preset-item .preset-name,
    .icon-preset-item .preset-name {
        color: #F5F5F7;
    }
    
    .preset-item .preset-desc,
    .icon-preset-item .preset-desc {
        color: #636366;
    }
    
    #worldbook-groups-list .contact-item,
    .worldbook-group-card {
        background: #1C1C1E !important;
        border-color: rgba(255, 255, 255, 0.1) !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important;
    }
    
    #worldbook-groups-list .contact-item .contact-name,
    #worldbook-groups-list .contact-item .group-name,
    .worldbook-group-card .group-name {
        color: #F5F5F7 !important;
    }
    
    #worldbook-groups-list .contact-item .contact-preview,
    #worldbook-groups-list .contact-item .group-count,
    .worldbook-group-card .group-count {
        color: #636366 !important;
    }
    
    #worldbook-groups-list .contact-item::before {
        background: linear-gradient(90deg, #636366 0%, #45494D 100%);
    }
}

/* ===== 26. åˆ†ç»„å†…ä¸–ç•Œä¹¦åˆ—è¡¨ (books-in-group-list) ===== */
#books-in-group-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 16px;
}

#books-in-group-list .contact-item,
.worldbook-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 16px;
    background: #FFFFFF;
    border-radius: 14px;
    border: 1px solid rgba(69, 73, 77, 0.1);
    box-shadow: 0 2px 6px rgba(69, 73, 77, 0.05);
    cursor: pointer;
    transition: all 0.2s ease;
}

#books-in-group-list .contact-item:active,
.worldbook-item:active {
    transform: scale(0.99);
    background: #F4F7F9;
}

/* ä¸–ç•Œä¹¦å›¾æ ‡ */
#books-in-group-list .contact-item::before {
    content: 'ğŸ“–';
    font-size: 20px;
    flex-shrink: 0;
}

#books-in-group-list .contact-item .contact-name {
    font-size: 15px;
    font-weight: 500;
    color: #45494D;
    flex: 1;
}

#books-in-group-list .contact-item .contact-preview,
#books-in-group-list .contact-item .contact-time,
#books-in-group-list .contact-item .contact-avatar {
    display: none;
}

